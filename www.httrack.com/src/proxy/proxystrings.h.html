<!DOCTYPE html PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML>

<!-- Mirrored from www.httrack.com/src/proxy/proxystrings.h.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 02 Jan 2023 20:34:02 GMT -->
<HEAD>
<TITLE>./proxy/proxystrings.h - HTTrack Website Copier</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#1F00FF" ALINK="#FF0000" VLINK="#9900DD">
<A NAME="top">
<A NAME="file1">
<H1>./proxy/proxystrings.h</H1>

<PRE>
<I><FONT COLOR="#B22222">/* ------------------------------------------------------------ */</FONT></I>
<I><FONT COLOR="#B22222">/*
HTTrack Website Copier, Offline Browser for Windows and Unix
Copyright (C) 1998-2015 Xavier Roche and other contributors

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.

Please visit our Website: http://www.httrack.com
*/</FONT></I>

<I><FONT COLOR="#B22222">/* ------------------------------------------------------------ */</FONT></I>
<I><FONT COLOR="#B22222">/* File: Strings                                                */</FONT></I>
<I><FONT COLOR="#B22222">/* Author: Xavier Roche                                         */</FONT></I>
<I><FONT COLOR="#B22222">/* ------------------------------------------------------------ */</FONT></I>

<I><FONT COLOR="#B22222">// Strings a bit safer than static buffers
</FONT></I>
#<B><FONT COLOR="#5F9EA0">ifndef</FONT></B> <FONT COLOR="#B8860B">HTS_PROXYSTRINGS_DEFSTATIC</FONT>
#<B><FONT COLOR="#5F9EA0">define</FONT></B> <FONT COLOR="#B8860B">HTS_PROXYSTRINGS_DEFSTATIC</FONT>

#<B><FONT COLOR="#5F9EA0">include</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;htsstrings.h&quot;</FONT></B>

<I><FONT COLOR="#B22222">/* Tools */</FONT></I>

HTS_UNUSED <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">int</FONT></B> <B><FONT COLOR="#0000FF">ehexh</FONT></B>(<B><FONT COLOR="#228B22">char</FONT></B> c) {
  <B><FONT COLOR="#A020F0">if</FONT></B> ((c &gt;= <B><FONT COLOR="#BC8F8F">'0'</FONT></B>) &amp;&amp; (c &lt;= <B><FONT COLOR="#BC8F8F">'9'</FONT></B>))
    <B><FONT COLOR="#A020F0">return</FONT></B> c - <B><FONT COLOR="#BC8F8F">'0'</FONT></B>;
  <B><FONT COLOR="#A020F0">if</FONT></B> ((c &gt;= <B><FONT COLOR="#BC8F8F">'a'</FONT></B>) &amp;&amp; (c &lt;= <B><FONT COLOR="#BC8F8F">'f'</FONT></B>))
    c -= (<B><FONT COLOR="#BC8F8F">'a'</FONT></B> - <B><FONT COLOR="#BC8F8F">'A'</FONT></B>);
  <B><FONT COLOR="#A020F0">if</FONT></B> ((c &gt;= <B><FONT COLOR="#BC8F8F">'A'</FONT></B>) &amp;&amp; (c &lt;= <B><FONT COLOR="#BC8F8F">'F'</FONT></B>))
    <B><FONT COLOR="#A020F0">return</FONT></B> (c - <B><FONT COLOR="#BC8F8F">'A'</FONT></B> + 10);
  <B><FONT COLOR="#A020F0">return</FONT></B> 0;
}

HTS_UNUSED <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">int</FONT></B> <B><FONT COLOR="#0000FF">ehex</FONT></B>(<B><FONT COLOR="#228B22">const</FONT></B> <B><FONT COLOR="#228B22">char</FONT></B> *s) {
  <B><FONT COLOR="#A020F0">return</FONT></B> 16 * ehexh(*s) + ehexh(*(s + 1));
}

HTS_UNUSED <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">void</FONT></B> <B><FONT COLOR="#0000FF">unescapehttp</FONT></B>(<B><FONT COLOR="#228B22">const</FONT></B> <B><FONT COLOR="#228B22">char</FONT></B> *s, String * tempo) {
  <B><FONT COLOR="#228B22">int</FONT></B> i;

  <B><FONT COLOR="#A020F0">for</FONT></B>(i = 0; s[i] != <B><FONT COLOR="#BC8F8F">'\0'</FONT></B>; i++) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (s[i] == <B><FONT COLOR="#BC8F8F">'%'</FONT></B> &amp;&amp; s[i + 1] == <B><FONT COLOR="#BC8F8F">'%'</FONT></B>) {
      i++;
      StringAddchar(*tempo, <B><FONT COLOR="#BC8F8F">'%'</FONT></B>);
    } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (s[i] == <B><FONT COLOR="#BC8F8F">'%'</FONT></B>) {
      <B><FONT COLOR="#228B22">char</FONT></B> hc;

      i++;
      hc = (<B><FONT COLOR="#228B22">char</FONT></B>) ehex(s + i);
      StringAddchar(*tempo, (<B><FONT COLOR="#228B22">char</FONT></B>) hc);
      i++;                      <I><FONT COLOR="#B22222">// sauter 2 caract√®res finalement
</FONT></I>    } <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (s[i] == <B><FONT COLOR="#BC8F8F">'+'</FONT></B>) {
      StringAddchar(*tempo, <B><FONT COLOR="#BC8F8F">' '</FONT></B>);
    } <B><FONT COLOR="#A020F0">else</FONT></B>
      StringAddchar(*tempo, s[i]);
  }
}

HTS_UNUSED <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">void</FONT></B> <B><FONT COLOR="#0000FF">escapexml</FONT></B>(<B><FONT COLOR="#228B22">const</FONT></B> <B><FONT COLOR="#228B22">char</FONT></B> *s, String * tempo) {
  <B><FONT COLOR="#228B22">int</FONT></B> i;

  <B><FONT COLOR="#A020F0">for</FONT></B>(i = 0; s[i] != <B><FONT COLOR="#BC8F8F">'\0'</FONT></B>; i++) {
    <B><FONT COLOR="#A020F0">if</FONT></B> (s[i] == <B><FONT COLOR="#BC8F8F">'&amp;'</FONT></B>)
      StringCat(*tempo, <B><FONT COLOR="#BC8F8F">&quot;&amp;amp;&quot;</FONT></B>);
    <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (s[i] == <B><FONT COLOR="#BC8F8F">'&lt;'</FONT></B>)
      StringCat(*tempo, <B><FONT COLOR="#BC8F8F">&quot;&amp;lt;&quot;</FONT></B>);
    <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (s[i] == <B><FONT COLOR="#BC8F8F">'&gt;'</FONT></B>)
      StringCat(*tempo, <B><FONT COLOR="#BC8F8F">&quot;&amp;gt;&quot;</FONT></B>);
    <B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (s[i] == <B><FONT COLOR="#BC8F8F">'\&quot;'</FONT></B>)
      StringCat(*tempo, <B><FONT COLOR="#BC8F8F">&quot;&amp;quot;&quot;</FONT></B>);
    <B><FONT COLOR="#A020F0">else</FONT></B>
      StringAddchar(*tempo, s[i]);
  }
}

HTS_UNUSED <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">char</FONT></B>* <B><FONT COLOR="#0000FF">file_convert</FONT></B>(<B><FONT COLOR="#228B22">char</FONT></B> *dest, size_t size, <B><FONT COLOR="#228B22">const</FONT></B> <B><FONT COLOR="#228B22">char</FONT></B> *src) {
  size_t i;
  <B><FONT COLOR="#A020F0">for</FONT></B>(i = 0 ; src[i] != <B><FONT COLOR="#BC8F8F">'\0'</FONT></B> &amp;&amp; i + 1 &lt; size ; i++) {
#<B><FONT COLOR="#5F9EA0">ifdef</FONT></B> <FONT COLOR="#B8860B">_WIN32</FONT>
    <B><FONT COLOR="#A020F0">if</FONT></B> (src[i] == <B><FONT COLOR="#BC8F8F">'/'</FONT></B>) {
      dest[i] = <B><FONT COLOR="#BC8F8F">'\\'</FONT></B>;
    } <B><FONT COLOR="#A020F0">else</FONT></B> {
#<B><FONT COLOR="#5F9EA0">endif</FONT></B>
    dest[i] = src[i];
#<B><FONT COLOR="#5F9EA0">ifdef</FONT></B> <FONT COLOR="#B8860B">_WIN32</FONT>
    }
#<B><FONT COLOR="#5F9EA0">endif</FONT></B>
  }
  dest[i] = <B><FONT COLOR="#BC8F8F">'\0'</FONT></B>;
  <B><FONT COLOR="#A020F0">return</FONT></B> dest;
}

#<B><FONT COLOR="#5F9EA0">endif</FONT></B>
</PRE>
<HR>
<ADDRESS>Generated by <A HREF="http://www.iki.fi/~mtr/genscript/">GNU Enscript 1.6.5.90</A>.</ADDRESS>
</BODY>

<!-- Mirrored from www.httrack.com/src/proxy/proxystrings.h.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 02 Jan 2023 20:34:02 GMT -->
</HTML>
